## Installation
- Full installation requires installing of OpenCL, installing of the Rust
toolchain, and setting up some input files.

### OpenCL
- Install the vendor specific OpenCL drivers and SDK.
- Windows users need to make sure to have OpenCL.lib in the project root
directory since I don't think they've yet to figure out a standard place to put
their libraries on Windows.

### Rust Toolchain
- Install the Rust toolchain by following the instructions at
[www.rustup.rs/]().

### Input files
- The best way to get the set of images for inference testing is to contact me
or any of the team members of Effproc at Tampere University. Inputs files in
classes `bus, normalcar, truck, van` should be placed in
`input/images/<label>/*.jpg`, eg. `input/images/normalcar/*.jpg`.

## Running
`export RUSTFLAGS="-C target-cpu=native"` to make sure all CPU features are used
(eg. AVX?). Having a GPU for the benchmarks probably makes them run quite a bit
faster.

Run the accuracy test binary. Requires a set of test images jpg files in
`input/images` organized into directories by labels (bus, normalcar, truck,
van).
`cargo run --release`

Run tests.
`cargo test`

Run all benchmarks (regardless of if some of them fail due to OpenCL things).
`cargo bench --no-fail-fast`

## Logging
All programs that are included read the log level from an environment variable
with the key `RUST_LOG`. Log-levels are 'error', 'warn', 'info', 'debug',
'trace'. Here are a couple of examples on how to turn on logging on a given
terminal:
- all: `export RUST_LOG=warn,rusty_cnn=trace`
- high-level: `export RUST_LOG=warn,rusty_cnn=info`

Additionally, setting `CRITERION_DEBUG=1` allows to view the gnuplots scripts
generated by criterion-rs.

